
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../python-pyspark/">
      
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>API Reference - GCHQ Data Quality</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="#1a237e" data-md-color-accent="#3949ab">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#api-reference" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="GCHQ Data Quality" class="md-header__button md-logo" aria-label="GCHQ Data Quality" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            GCHQ Data Quality
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              API Reference
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="#1a237e" data-md-color-accent="#3949ab"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="#1a237e" data-md-color-accent="#90caf9"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="GCHQ Data Quality" class="md-nav__button md-logo" aria-label="GCHQ Data Quality" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    GCHQ Data Quality
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../what-is-data-quality/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    What is Data Quality?
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    00 - Installation
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../python-basic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    01 - Basic Tutorial
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../python-advanced/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    02 - Running from Configuration Files
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../python-pyspark/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    03 - PySpark & Nested Data
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#rules" class="md-nav__link">
    <span class="md-ellipsis">
      
        Rules
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Rules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.uniqueness.UniquenessRule" class="md-nav__link">
    <span class="md-ellipsis">
      
        UniquenessRule
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.completeness.CompletenessRule" class="md-nav__link">
    <span class="md-ellipsis">
      
        CompletenessRule
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.accuracy.AccuracyRule" class="md-nav__link">
    <span class="md-ellipsis">
      
        AccuracyRule
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.consistency.ConsistencyRule" class="md-nav__link">
    <span class="md-ellipsis">
      
        ConsistencyRule
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.timeliness.TimelinessRelativeRule" class="md-nav__link">
    <span class="md-ellipsis">
      
        TimelinessRelativeRule
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.timeliness.TimelinessStaticRule" class="md-nav__link">
    <span class="md-ellipsis">
      
        TimelinessStaticRule
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.validity.ValidityNumericalRangeRule" class="md-nav__link">
    <span class="md-ellipsis">
      
        ValidityNumericalRangeRule
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.validity.ValidityRegexRule" class="md-nav__link">
    <span class="md-ellipsis">
      
        ValidityRegexRule
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-quality-configuration-and-results" class="md-nav__link">
    <span class="md-ellipsis">
      
        Data Quality Configuration and Results
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Data Quality Configuration and Results">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.config.DataQualityConfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        DataQualityConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.results.models.DataQualityReport" class="md-nav__link">
    <span class="md-ellipsis">
      
        DataQualityReport
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.results.models.DataQualityResult" class="md-nav__link">
    <span class="md-ellipsis">
      
        DataQualityResult
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spark-utilities" class="md-nav__link">
    <span class="md-ellipsis">
      
        Spark Utilities
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Spark Utilities">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.spark.dataframe_operations.flatten_spark" class="md-nav__link">
    <span class="md-ellipsis">
      
        flatten_spark
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#types-and-base-rule" class="md-nav__link">
    <span class="md-ellipsis">
      
        Types and Base Rule
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Types and Base Rule">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.models.DamaFramework" class="md-nav__link">
    <span class="md-ellipsis">
      
        DamaFramework
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule" class="md-nav__link">
    <span class="md-ellipsis">
      
        BaseRule
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseRule">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule.data_quality_dimension" class="md-nav__link">
    <span class="md-ellipsis">
      
        data_quality_dimension
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule.field" class="md-nav__link">
    <span class="md-ellipsis">
      
        field
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule.na_values" class="md-nav__link">
    <span class="md-ellipsis">
      
        na_values
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule.rule_description" class="md-nav__link">
    <span class="md-ellipsis">
      
        rule_description
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule.rule_id" class="md-nav__link">
    <span class="md-ellipsis">
      
        rule_id
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule.skip_if_null" class="md-nav__link">
    <span class="md-ellipsis">
      
        skip_if_null
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._coerce_dataframe_type" class="md-nav__link">
    <span class="md-ellipsis">
      
        _coerce_dataframe_type
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._copy_and_subset_dataframe" class="md-nav__link">
    <span class="md-ellipsis">
      
        _copy_and_subset_dataframe
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._evaluate_in_elastic" class="md-nav__link">
    <span class="md-ellipsis">
      
        _evaluate_in_elastic
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._evaluate_in_pandas" class="md-nav__link">
    <span class="md-ellipsis">
      
        _evaluate_in_pandas
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._evaluate_in_pandas_output_dataframe" class="md-nav__link">
    <span class="md-ellipsis">
      
        _evaluate_in_pandas_output_dataframe
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._evaluate_in_spark" class="md-nav__link">
    <span class="md-ellipsis">
      
        _evaluate_in_spark
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._get_columns_used_pandas" class="md-nav__link">
    <span class="md-ellipsis">
      
        _get_columns_used_pandas
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._get_null_count" class="md-nav__link">
    <span class="md-ellipsis">
      
        _get_null_count
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._get_null_counts_all_columns" class="md-nav__link">
    <span class="md-ellipsis">
      
        _get_null_counts_all_columns
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._get_records_evaluated_mask_pandas" class="md-nav__link">
    <span class="md-ellipsis">
      
        _get_records_evaluated_mask_pandas
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._get_records_evaluated_pandas" class="md-nav__link">
    <span class="md-ellipsis">
      
        _get_records_evaluated_pandas
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._get_records_failed_mask_pandas" class="md-nav__link">
    <span class="md-ellipsis">
      
        _get_records_failed_mask_pandas
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._get_records_failed_pandas" class="md-nav__link">
    <span class="md-ellipsis">
      
        _get_records_failed_pandas
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._get_records_passing_mask_pandas" class="md-nav__link">
    <span class="md-ellipsis">
      
        _get_records_passing_mask_pandas
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._get_records_passing_pandas" class="md-nav__link">
    <span class="md-ellipsis">
      
        _get_records_passing_pandas
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._get_skip_if_null_mask" class="md-nav__link">
    <span class="md-ellipsis">
      
        _get_skip_if_null_mask
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._get_spark_safe_rule" class="md-nav__link">
    <span class="md-ellipsis">
      
        _get_spark_safe_rule
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._handle_dataframe_coercion" class="md-nav__link">
    <span class="md-ellipsis">
      
        _handle_dataframe_coercion
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._handle_na_values_pandas" class="md-nav__link">
    <span class="md-ellipsis">
      
        _handle_na_values_pandas
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._replace_na_in_bool_mask" class="md-nav__link">
    <span class="md-ellipsis">
      
        _replace_na_in_bool_mask
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._require_failed_records_sample" class="md-nav__link">
    <span class="md-ellipsis">
      
        _require_failed_records_sample
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._warn_if_null_counts_different" class="md-nav__link">
    <span class="md-ellipsis">
      
        _warn_if_null_counts_different
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule.evaluate" class="md-nav__link">
    <span class="md-ellipsis">
      
        evaluate
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#rules" class="md-nav__link">
    <span class="md-ellipsis">
      
        Rules
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Rules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.uniqueness.UniquenessRule" class="md-nav__link">
    <span class="md-ellipsis">
      
        UniquenessRule
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.completeness.CompletenessRule" class="md-nav__link">
    <span class="md-ellipsis">
      
        CompletenessRule
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.accuracy.AccuracyRule" class="md-nav__link">
    <span class="md-ellipsis">
      
        AccuracyRule
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.consistency.ConsistencyRule" class="md-nav__link">
    <span class="md-ellipsis">
      
        ConsistencyRule
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.timeliness.TimelinessRelativeRule" class="md-nav__link">
    <span class="md-ellipsis">
      
        TimelinessRelativeRule
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.timeliness.TimelinessStaticRule" class="md-nav__link">
    <span class="md-ellipsis">
      
        TimelinessStaticRule
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.validity.ValidityNumericalRangeRule" class="md-nav__link">
    <span class="md-ellipsis">
      
        ValidityNumericalRangeRule
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.validity.ValidityRegexRule" class="md-nav__link">
    <span class="md-ellipsis">
      
        ValidityRegexRule
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-quality-configuration-and-results" class="md-nav__link">
    <span class="md-ellipsis">
      
        Data Quality Configuration and Results
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Data Quality Configuration and Results">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.config.DataQualityConfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        DataQualityConfig
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.results.models.DataQualityReport" class="md-nav__link">
    <span class="md-ellipsis">
      
        DataQualityReport
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.results.models.DataQualityResult" class="md-nav__link">
    <span class="md-ellipsis">
      
        DataQualityResult
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spark-utilities" class="md-nav__link">
    <span class="md-ellipsis">
      
        Spark Utilities
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Spark Utilities">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.spark.dataframe_operations.flatten_spark" class="md-nav__link">
    <span class="md-ellipsis">
      
        flatten_spark
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#types-and-base-rule" class="md-nav__link">
    <span class="md-ellipsis">
      
        Types and Base Rule
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Types and Base Rule">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.models.DamaFramework" class="md-nav__link">
    <span class="md-ellipsis">
      
        DamaFramework
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule" class="md-nav__link">
    <span class="md-ellipsis">
      
        BaseRule
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseRule">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule.data_quality_dimension" class="md-nav__link">
    <span class="md-ellipsis">
      
        data_quality_dimension
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule.field" class="md-nav__link">
    <span class="md-ellipsis">
      
        field
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule.na_values" class="md-nav__link">
    <span class="md-ellipsis">
      
        na_values
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule.rule_description" class="md-nav__link">
    <span class="md-ellipsis">
      
        rule_description
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule.rule_id" class="md-nav__link">
    <span class="md-ellipsis">
      
        rule_id
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule.skip_if_null" class="md-nav__link">
    <span class="md-ellipsis">
      
        skip_if_null
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._coerce_dataframe_type" class="md-nav__link">
    <span class="md-ellipsis">
      
        _coerce_dataframe_type
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._copy_and_subset_dataframe" class="md-nav__link">
    <span class="md-ellipsis">
      
        _copy_and_subset_dataframe
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._evaluate_in_elastic" class="md-nav__link">
    <span class="md-ellipsis">
      
        _evaluate_in_elastic
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._evaluate_in_pandas" class="md-nav__link">
    <span class="md-ellipsis">
      
        _evaluate_in_pandas
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._evaluate_in_pandas_output_dataframe" class="md-nav__link">
    <span class="md-ellipsis">
      
        _evaluate_in_pandas_output_dataframe
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._evaluate_in_spark" class="md-nav__link">
    <span class="md-ellipsis">
      
        _evaluate_in_spark
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._get_columns_used_pandas" class="md-nav__link">
    <span class="md-ellipsis">
      
        _get_columns_used_pandas
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._get_null_count" class="md-nav__link">
    <span class="md-ellipsis">
      
        _get_null_count
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._get_null_counts_all_columns" class="md-nav__link">
    <span class="md-ellipsis">
      
        _get_null_counts_all_columns
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._get_records_evaluated_mask_pandas" class="md-nav__link">
    <span class="md-ellipsis">
      
        _get_records_evaluated_mask_pandas
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._get_records_evaluated_pandas" class="md-nav__link">
    <span class="md-ellipsis">
      
        _get_records_evaluated_pandas
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._get_records_failed_mask_pandas" class="md-nav__link">
    <span class="md-ellipsis">
      
        _get_records_failed_mask_pandas
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._get_records_failed_pandas" class="md-nav__link">
    <span class="md-ellipsis">
      
        _get_records_failed_pandas
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._get_records_passing_mask_pandas" class="md-nav__link">
    <span class="md-ellipsis">
      
        _get_records_passing_mask_pandas
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._get_records_passing_pandas" class="md-nav__link">
    <span class="md-ellipsis">
      
        _get_records_passing_pandas
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._get_skip_if_null_mask" class="md-nav__link">
    <span class="md-ellipsis">
      
        _get_skip_if_null_mask
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._get_spark_safe_rule" class="md-nav__link">
    <span class="md-ellipsis">
      
        _get_spark_safe_rule
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._handle_dataframe_coercion" class="md-nav__link">
    <span class="md-ellipsis">
      
        _handle_dataframe_coercion
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._handle_na_values_pandas" class="md-nav__link">
    <span class="md-ellipsis">
      
        _handle_na_values_pandas
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._replace_na_in_bool_mask" class="md-nav__link">
    <span class="md-ellipsis">
      
        _replace_na_in_bool_mask
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._require_failed_records_sample" class="md-nav__link">
    <span class="md-ellipsis">
      
        _require_failed_records_sample
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule._warn_if_null_counts_different" class="md-nav__link">
    <span class="md-ellipsis">
      
        _warn_if_null_counts_different
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gchq_data_quality.rules.base.BaseRule.evaluate" class="md-nav__link">
    <span class="md-ellipsis">
      
        evaluate
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="api-reference">API Reference</h1>
<h2 id="rules">Rules</h2>


<div class="doc doc-object doc-class">



<h3 id="gchq_data_quality.rules.uniqueness.UniquenessRule" class="doc doc-heading">
            <code>gchq_data_quality.rules.uniqueness.UniquenessRule</code>


</h3>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="gchq_data_quality.rules.base.BaseRule" href="#gchq_data_quality.rules.base.BaseRule">BaseRule</a></code></p>



        <p>Rule for assessing uniqueness in a column.</p>
<p>Measures the proportion of unique, non-null values in a specified column. This is
useful for checking distinct identifiers or reference keys. Additional null-like
values can be specified via <code>na_values</code>.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="field = Field(..., description='Column to check')

  
      class-attribute
      instance-attribute
   (gchq_data_quality.rules.uniqueness.UniquenessRule.field)" href="#gchq_data_quality.rules.base.BaseRule.field">field</a></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Column to evaluate for uniqueness.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="na_values = Field(default=None, description='Additional values to treat as null')

  
      class-attribute
      instance-attribute
   (gchq_data_quality.rules.uniqueness.UniquenessRule.na_values)" href="#gchq_data_quality.rules.base.BaseRule.na_values">na_values</a></code></td>
            <td>
                  <code><span title="Any">Any</span> | <span title="list">list</span>[<span title="Any">Any</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Values to treat as missing.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="gchq_data_quality.rules.uniqueness.UniquenessRule.data_quality_dimension">data_quality_dimension</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="gchq_data_quality.models.DamaFramework" href="#gchq_data_quality.models.DamaFramework">DamaFramework</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Data quality dimension (Uniqueness).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="rule_id = Field(default=None, description='Identifier for this rule')

  
      class-attribute
      instance-attribute
   (gchq_data_quality.rules.uniqueness.UniquenessRule.rule_id)" href="#gchq_data_quality.rules.base.BaseRule.rule_id">rule_id</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional rule identifier.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="rule_description = Field(default=None, description='Description of the rule')

  
      class-attribute
      instance-attribute
   (gchq_data_quality.rules.uniqueness.UniquenessRule.rule_description)" href="#gchq_data_quality.rules.base.BaseRule.rule_description">rule_description</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional description for this rule.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="evaluate(data_source, index_name='', query=None) (gchq_data_quality.rules.uniqueness.UniquenessRule.evaluate)" href="#gchq_data_quality.rules.base.BaseRule.evaluate">evaluate</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>pd.DataFrame | SparkDataFrame) -&gt; DataQualityResult
Evaluates the rule on the provided Pandas or Spark DataFrame and returns
the metrics and diagnostics of the rule evaluation.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span><span class="w"> </span><span class="nn">gchq_data_quality.rules.uniqueness</span><span class="w"> </span><span class="kn">import</span> <span class="n">UniquenessRule</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="kc">None</span><span class="p">]})</span>

<span class="c1"># Basic uniqueness check</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">rule</span> <span class="o">=</span> <span class="n">UniquenessRule</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="s1">&#39;id&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">rule</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">pass_rate</span><span class="p">)</span>
<span class="mf">0.75</span>

<span class="c1"># Specify additional NA values</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">rule</span> <span class="o">=</span> <span class="n">UniquenessRule</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">]})</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">rule</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">pass_rate</span><span class="p">)</span>
<span class="mf">0.75</span>
</code></pre></div>
</details>

<details class="note" open>
  <summary>Note</summary>
  <p>The pass_rate metric is calculated as (number of unique values) /
(number of non-null records). Therefore, if every value in the column
appears exactly twice, pass_rate will be 0.5 (not 0.0!). For columns with even more
duplication, pass_rate will decrease and approach zero as the number of
unique values becomes small relative to the number of total records.
Only if every record is identical will pass_rate be 1 / N (where N is the number
of records).</p>
</details>

    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>DataQualityResult</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Contains the uniqueness score (<code>pass_rate</code>), identifiers for failed records,</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a sample of duplicate values, the number of records evaluated, and rule metadata.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>See DataQualityResult documentation for further attribute details.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="gchq_data_quality.rules.completeness.CompletenessRule" class="doc doc-heading">
            <code>gchq_data_quality.rules.completeness.CompletenessRule</code>


</h3>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="gchq_data_quality.rules.base.BaseRule" href="#gchq_data_quality.rules.base.BaseRule">BaseRule</a></code></p>



        <p>Rule to calculate the completeness score for a field.</p>
<p>Completeness is measured as the proportion of non-null values in the specified
column. Values specified in <code>na_values</code> are converted to nulls prior to calculation.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="field = Field(..., description='Column to check')

  
      class-attribute
      instance-attribute
   (gchq_data_quality.rules.completeness.CompletenessRule.field)" href="#gchq_data_quality.rules.base.BaseRule.field">field</a></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The column name to assess.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="na_values = Field(default=None, description='Additional values to treat as null')

  
      class-attribute
      instance-attribute
   (gchq_data_quality.rules.completeness.CompletenessRule.na_values)" href="#gchq_data_quality.rules.base.BaseRule.na_values">na_values</a></code></td>
            <td>
                  <code><span title="str">str</span> | <span title="list">list</span>[<span title="Any">Any</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional indicators to treat as missing.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="rule_id = Field(default=None, description='Identifier for this rule')

  
      class-attribute
      instance-attribute
   (gchq_data_quality.rules.completeness.CompletenessRule.rule_id)" href="#gchq_data_quality.rules.base.BaseRule.rule_id">rule_id</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional identifier for the rule.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="rule_description = Field(default=None, description='Description of the rule')

  
      class-attribute
      instance-attribute
   (gchq_data_quality.rules.completeness.CompletenessRule.rule_description)" href="#gchq_data_quality.rules.base.BaseRule.rule_description">rule_description</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional description of the rule.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="evaluate(data_source, index_name='', query=None) (gchq_data_quality.rules.completeness.CompletenessRule.evaluate)" href="#gchq_data_quality.rules.base.BaseRule.evaluate">evaluate</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>pd.DataFrame | SparkDataFrame) -&gt; DataQualityResult
Evaluates completeness for the chosen fields on a Pandas or Spark DataFrame.
Returns the metrics and diagnostics of the rule evaluation.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">rule</span> <span class="o">=</span> <span class="n">CompletenessRule</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="s2">&quot;column_name&quot;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">rule</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">pass_rate</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">rule</span> <span class="o">=</span> <span class="n">CompletenessRule</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="s2">&quot;column_name&quot;</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="s2">&quot;missing&quot;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">rule</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</code></pre></div>
</details>

    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>DataQualityResult</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Contains completeness score (<code>pass_rate</code>), field name,</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>number of records evaluated, and rule metadata. See DataQualityResult documentation</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>for further attribute details.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="gchq_data_quality.rules.accuracy.AccuracyRule" class="doc doc-heading">
            <code>gchq_data_quality.rules.accuracy.AccuracyRule</code>


</h3>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="gchq_data_quality.rules.base.BaseRule" href="#gchq_data_quality.rules.base.BaseRule">BaseRule</a></code></p>



        <p>Rule to check if values meet a list of valid (or invalid) values.</p>
<p>Skips NULLs, including those recognised via <code>na_values</code>. Instantiate this class and
call <code>.evaluate(df)</code> to assess data quality for the chosen column.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="field = Field(..., description='Column to check')

  
      class-attribute
      instance-attribute
   (gchq_data_quality.rules.accuracy.AccuracyRule.field)" href="#gchq_data_quality.rules.base.BaseRule.field">field</a></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The column to check for accuracy.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="gchq_data_quality.rules.accuracy.AccuracyRule.valid_values">valid_values</span></code></td>
            <td>
                  <code><span title="list">list</span>[<span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The set of acceptable values for the field.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="gchq_data_quality.rules.accuracy.AccuracyRule.inverse">inverse</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, values in <code>valid_values</code> are considered invalid (exclusion list).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="na_values = Field(default=None, description='Additional values to treat as null')

  
      class-attribute
      instance-attribute
   (gchq_data_quality.rules.accuracy.AccuracyRule.na_values)" href="#gchq_data_quality.rules.base.BaseRule.na_values">na_values</a></code></td>
            <td>
                  <code><span title="str">str</span> | <span title="list">list</span>[<span title="typing.Any">Any</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional indicators to treat as missing values.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="rule_id = Field(default=None, description='Identifier for this rule')

  
      class-attribute
      instance-attribute
   (gchq_data_quality.rules.accuracy.AccuracyRule.rule_id)" href="#gchq_data_quality.rules.base.BaseRule.rule_id">rule_id</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional identifier for the rule.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="rule_description = Field(default=None, description='Description of the rule')

  
      class-attribute
      instance-attribute
   (gchq_data_quality.rules.accuracy.AccuracyRule.rule_description)" href="#gchq_data_quality.rules.base.BaseRule.rule_description">rule_description</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional description of the rule.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="evaluate(data_source, index_name='', query=None) (gchq_data_quality.rules.accuracy.AccuracyRule.evaluate)" href="#gchq_data_quality.rules.base.BaseRule.evaluate">evaluate</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>pd.DataFrame | SparkDataFrame) -&gt; DataQualityResult
Evaluates the rule on the provided Pandas or Spark DataFrame and returns
the metrics and diagnostics of the rule evaluation.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">rule</span> <span class="o">=</span> <span class="n">AccuracyRule</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="s2">&quot;category&quot;</span><span class="p">,</span> <span class="n">valid_values</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">rule</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">pass_rate</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">records_failed_ids</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">rule</span> <span class="o">=</span> <span class="n">AccuracyRule</span><span class="p">(</span>
<span class="o">...</span>     <span class="n">field</span><span class="o">=</span><span class="s2">&quot;department&quot;</span><span class="p">,</span>
<span class="o">...</span>     <span class="n">valid_values</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;HR&quot;</span><span class="p">,</span> <span class="s2">&quot;IT&quot;</span><span class="p">,</span> <span class="s2">&quot;Sales&quot;</span><span class="p">],</span>
<span class="o">...</span>     <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;N/A&quot;</span><span class="p">,</span> <span class="s2">&quot;N/K&quot;</span><span class="p">]</span>
<span class="o">...</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">rule</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">rule</span> <span class="o">=</span> <span class="n">AccuracyRule</span><span class="p">(</span>
<span class="o">...</span>     <span class="n">field</span><span class="o">=</span><span class="s2">&quot;status&quot;</span><span class="p">,</span>
<span class="o">...</span>     <span class="n">valid_values</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;expired&quot;</span><span class="p">,</span> <span class="s2">&quot;deleted&quot;</span><span class="p">],</span>
<span class="o">...</span>     <span class="n">inverse</span><span class="o">=</span><span class="kc">True</span> <span class="c1"># value must NOT be expired or deleted</span>
<span class="o">...</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">rule</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</code></pre></div>
</details>

    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>DataQualityResult</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An object containing the accuracy score (pass_rate),</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the indices of failed rows (records_failed_ids), a sample of failed values</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>(records_failed_sample), the number of records evaluated, and further rule metadata.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>See DataQualityResult documentation for full details.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="gchq_data_quality.rules.consistency.ConsistencyRule" class="doc doc-heading">
            <code>gchq_data_quality.rules.consistency.ConsistencyRule</code>


</h3>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="gchq_data_quality.rules.base.BaseRule" href="#gchq_data_quality.rules.base.BaseRule">BaseRule</a></code></p>



        <p>Rule for evaluating data consistency based on boolean expressions (with an optional condition).</p>
<p>Expressions may use any valid Pandas eval syntax that returns a boolean result. Backticks are required around all column names.
Nulls and additional na_values are handled according to the skip policy.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="field = Field(..., description='Column to check')

  
      class-attribute
      instance-attribute
   (gchq_data_quality.rules.consistency.ConsistencyRule.field)" href="#gchq_data_quality.rules.base.BaseRule.field">field</a></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The column to check for consistency.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="gchq_data_quality.rules.consistency.ConsistencyRule.expression">expression</span></code></td>
            <td>
                  <code><span title="str">str</span> | <span title="dict">dict</span>[<span title="str">str</span>, <span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A boolean expression, or a conditional {'if', 'then'} dictionary (with backticks for column names).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="gchq_data_quality.rules.consistency.ConsistencyRule.skip_if_null">skip_if_null</span></code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;all&#39;, &#39;any&#39;, &#39;never&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Controls row skipping for null values in relevant columns.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="na_values = Field(default=None, description='Additional values to treat as null')

  
      class-attribute
      instance-attribute
   (gchq_data_quality.rules.consistency.ConsistencyRule.na_values)" href="#gchq_data_quality.rules.base.BaseRule.na_values">na_values</a></code></td>
            <td>
                  <code><span title="str">str</span> | <span title="list">list</span>[<span title="Any">Any</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional values considered as missing.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="gchq_data_quality.rules.consistency.ConsistencyRule.data_quality_dimension">data_quality_dimension</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="gchq_data_quality.models.DamaFramework" href="#gchq_data_quality.models.DamaFramework">DamaFramework</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Associated data quality dimension - you may want to override it in this rule.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="rule_id = Field(default=None, description='Identifier for this rule')

  
      class-attribute
      instance-attribute
   (gchq_data_quality.rules.consistency.ConsistencyRule.rule_id)" href="#gchq_data_quality.rules.base.BaseRule.rule_id">rule_id</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional identifier for the rule.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="rule_description = Field(default=None, description='Description of the rule')

  
      class-attribute
      instance-attribute
   (gchq_data_quality.rules.consistency.ConsistencyRule.rule_description)" href="#gchq_data_quality.rules.base.BaseRule.rule_description">rule_description</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional description of the rule.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="evaluate(data_source, index_name='', query=None) (gchq_data_quality.rules.consistency.ConsistencyRule.evaluate)" href="#gchq_data_quality.rules.base.BaseRule.evaluate">evaluate</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>pd.DataFrame | SparkDataFrame) -&gt; DataQualityResult
Evaluates the rule on the provided Pandas or Spark DataFrame and returns
the metrics and diagnostics of the rule evaluation.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">rule</span> <span class="o">=</span> <span class="n">ConsistencyRule</span><span class="p">(</span>
<span class="o">...</span>     <span class="n">field</span><span class="o">=</span><span class="s2">&quot;score&quot;</span><span class="p">,</span>
<span class="o">...</span>     <span class="n">expression</span><span class="o">=</span><span class="s2">&quot;`score` &gt;= 50&quot;</span>
<span class="o">...</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">rule</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">rule</span> <span class="o">=</span> <span class="n">ConsistencyRule</span><span class="p">(</span>
<span class="o">...</span>     <span class="n">field</span><span class="o">=</span><span class="s2">&quot;completion_date&quot;</span><span class="p">,</span>
<span class="o">...</span>     <span class="n">expression</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;if&quot;</span><span class="p">:</span> <span class="s2">&quot;`status` == &#39;completed&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;then&quot;</span><span class="p">:</span> <span class="s2">&quot;`completion_date`.notnull()&quot;</span><span class="p">},</span>
        <span class="n">data_quality_dimension</span><span class="o">=</span><span class="s1">&#39;Completeness&#39;</span> <span class="c1"># you can override the DAMA Dimension</span>
<span class="o">...</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">rule</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

<span class="c1"># all series .str. methods are available</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">rule</span> <span class="o">=</span> <span class="n">ConsistencyRule</span><span class="p">(</span>
<span class="o">...</span>     <span class="n">field</span><span class="o">=</span><span class="s2">&quot;postcode&quot;</span><span class="p">,</span>
<span class="o">...</span>     <span class="n">expression</span><span class="o">=</span><span class="p">{</span>
<span class="o">...</span>         <span class="s2">&quot;if&quot;</span><span class="p">:</span> <span class="s2">&quot;`country` == &#39;UK&#39;&quot;</span><span class="p">,</span>
<span class="o">...</span>         <span class="s2">&quot;then&quot;</span><span class="p">:</span> <span class="s2">&quot;`postcode`.str.match(r&#39;^[A-Z]</span><span class="si">{2}</span><span class="s2">[0-9]</span><span class="si">{2}</span><span class="s2">$&#39;)&quot;</span>
<span class="o">...</span>     <span class="p">}</span>
<span class="o">...</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">rule</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

<span class="c1"># Date parts and arithmetic using .dt accessor</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">rule</span> <span class="o">=</span> <span class="n">ConsistencyRule</span><span class="p">(</span>
<span class="o">...</span>     <span class="n">field</span><span class="o">=</span><span class="s2">&quot;report_year&quot;</span><span class="p">,</span>
<span class="o">...</span>     <span class="n">expression</span><span class="o">=</span><span class="s2">&quot;`report_date`.dt.year == `report_year`&quot;</span>
<span class="o">...</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">rule</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

<span class="c1"># Boolean logic (AND, OR, NOT) with grouping and comparisons</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">rule</span> <span class="o">=</span> <span class="n">ConsistencyRule</span><span class="p">(</span>
<span class="o">...</span>     <span class="n">field</span><span class="o">=</span><span class="s2">&quot;flag&quot;</span><span class="p">,</span>
<span class="o">...</span>     <span class="n">expression</span><span class="o">=</span><span class="s2">&quot;(`score` &gt; 90) &amp; ((`status` == &#39;active&#39;) | ~`is_archived`)&quot;</span>
<span class="o">...</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">rule</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

<span class="c1"># Using mathematical operations</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">rule</span> <span class="o">=</span> <span class="n">ConsistencyRule</span><span class="p">(</span>
<span class="o">...</span>     <span class="n">field</span><span class="o">=</span><span class="s2">&quot;predicted&quot;</span><span class="p">,</span>
<span class="o">...</span>     <span class="n">expression</span><span class="o">=</span><span class="s2">&quot;abs(`actual` - `predicted`) &lt; 10&quot;</span>
<span class="o">...</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">rule</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</code></pre></div>
</details>

    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>DataQualityResult</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An object containing the consistency score (<code>pass_rate</code>),</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>number of records evaluated, a sample of inconsistent records, and details of failed row indices.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>See DataQualityResult documentation for full attribute descriptions.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="gchq_data_quality.rules.timeliness.TimelinessRelativeRule" class="doc doc-heading">
            <code>gchq_data_quality.rules.timeliness.TimelinessRelativeRule</code>


</h3>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="gchq_data_quality.rules.timeliness.TimelinessBaseRule">TimelinessBaseRule</span></code></p>



        <p>Rule to assess whether datetime values fall between relative time boundaries
from a reference date (which can be a static value or come from a column in the data source).</p>
<p>Timedelta bounds are specified for start and end, relative to a reference date or reference column.
All datetime comparisons are performed in UTC, with date-only values assumed midnight.
Only one of <code>reference_date</code> or <code>reference_column</code> may be provided. If neither is given,
current UTC time is used as the reference_date.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="field = Field(..., description='Column to check')

  
      class-attribute
      instance-attribute
   (gchq_data_quality.rules.timeliness.TimelinessRelativeRule.field)" href="#gchq_data_quality.rules.base.BaseRule.field">field</a></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the datetime column to assess.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="gchq_data_quality.rules.timeliness.TimelinessRelativeRule.start_timedelta">start_timedelta</span></code></td>
            <td>
                  <code><span title="datetime.timedelta">timedelta</span> | <span title="str">str</span> | <span title="int">int</span> | <span title="float">float</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Lower offset from the reference.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="gchq_data_quality.rules.timeliness.TimelinessRelativeRule.end_timedelta">end_timedelta</span></code></td>
            <td>
                  <code><span title="datetime.timedelta">timedelta</span> | <span title="str">str</span> | <span title="int">int</span> | <span title="float">float</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Upper offset from the reference.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="gchq_data_quality.rules.timeliness.TimelinessRelativeRule.reference_date">reference_date</span></code></td>
            <td>
                  <code><span title="str">str</span> | <span title="datetime.datetime">datetime</span> | <span title="pandas.Timestamp">Timestamp</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Fixed reference date/time (UTC).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="gchq_data_quality.rules.timeliness.TimelinessRelativeRule.reference_column">reference_column</span></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Per-row column providing reference dates/times.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="gchq_data_quality.rules.timeliness.TimelinessRelativeRule.dayfirst">dayfirst</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, parses ALL dates as day/month/year.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="na_values = Field(default=None, description='Additional values to treat as null')

  
      class-attribute
      instance-attribute
   (gchq_data_quality.rules.timeliness.TimelinessRelativeRule.na_values)" href="#gchq_data_quality.rules.base.BaseRule.na_values">na_values</a></code></td>
            <td>
                  <code><span title="str">str</span> | <span title="list">list</span>[<span title="Any">Any</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Values treated as missing.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="data_quality_dimension = Field(..., description='The Dama dimension for each rule')

  
      class-attribute
      instance-attribute
   (gchq_data_quality.rules.timeliness.TimelinessRelativeRule.data_quality_dimension)" href="#gchq_data_quality.rules.base.BaseRule.data_quality_dimension">data_quality_dimension</a></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="gchq_data_quality.models.DamaFramework" href="#gchq_data_quality.models.DamaFramework">DamaFramework</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Associated data quality dimension.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="rule_id = Field(default=None, description='Identifier for this rule')

  
      class-attribute
      instance-attribute
   (gchq_data_quality.rules.timeliness.TimelinessRelativeRule.rule_id)" href="#gchq_data_quality.rules.base.BaseRule.rule_id">rule_id</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional rule identifier.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="rule_description = Field(default=None, description='Description of the rule')

  
      class-attribute
      instance-attribute
   (gchq_data_quality.rules.timeliness.TimelinessRelativeRule.rule_description)" href="#gchq_data_quality.rules.base.BaseRule.rule_description">rule_description</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional rule description.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="evaluate(data_source, index_name='', query=None) (gchq_data_quality.rules.timeliness.TimelinessRelativeRule.evaluate)" href="#gchq_data_quality.rules.base.BaseRule.evaluate">evaluate</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>pd.DataFrame | SparkDataFrame) -&gt; DataQualityResult
Evaluates the rule on the provided Pandas or Spark DataFrame and returns
the metrics and diagnostics of the rule evaluation.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>


<details class="note" open>
  <summary>Note</summary>
  <p>Integer values into start or end timedelta are assumed to be nanoseconds (default pandas.to_timedelta() behaviour)</p>
</details>

<details class="example" open>
  <summary>Example</summary>
  <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">rule</span> <span class="o">=</span> <span class="n">TimelinessRelativeRule</span><span class="p">(</span>
<span class="o">...</span>     <span class="n">field</span><span class="o">=</span><span class="s2">&quot;event_date&quot;</span><span class="p">,</span>
<span class="o">...</span>     <span class="n">start_timedelta</span><span class="o">=</span><span class="s2">&quot;0d&quot;</span><span class="p">,</span>
<span class="o">...</span>     <span class="n">end_timedelta</span><span class="o">=</span><span class="s2">&quot;30d&quot;</span><span class="p">,</span>
<span class="o">...</span>     <span class="n">reference_date</span><span class="o">=</span><span class="s2">&quot;2024-01-01T00:00:00Z&quot;</span>
<span class="o">...</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">rule</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">rule</span> <span class="o">=</span> <span class="n">TimelinessRelativeRule</span><span class="p">(</span>
<span class="o">...</span>     <span class="n">field</span><span class="o">=</span><span class="s2">&quot;booking_date&quot;</span><span class="p">,</span>
<span class="o">...</span>     <span class="n">start_timedelta</span><span class="o">=</span><span class="s2">&quot;-1d&quot;</span><span class="p">,</span>
<span class="o">...</span>     <span class="n">end_timedelta</span><span class="o">=</span><span class="s2">&quot;5d&quot;</span><span class="p">,</span>
<span class="o">...</span>     <span class="n">reference_column</span><span class="o">=</span><span class="s2">&quot;event_date&quot;</span>
<span class="o">...</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">rule</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

<span class="c1"># Require event dates at least 5 days after the reference date</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">rule</span> <span class="o">=</span> <span class="n">TimelinessRelativeRule</span><span class="p">(</span>
<span class="o">...</span>     <span class="n">field</span><span class="o">=</span><span class="s2">&quot;event_date&quot;</span><span class="p">,</span>
<span class="o">...</span>     <span class="n">start_timedelta</span><span class="o">=</span><span class="s2">&quot;5d&quot;</span><span class="p">,</span>
<span class="o">...</span>     <span class="n">end_timedelta</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="o">...</span>     <span class="n">reference_date</span><span class="o">=</span><span class="s2">&quot;2023-06-01&quot;</span>
<span class="o">...</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">rule</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">timedelta</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">rule</span> <span class="o">=</span> <span class="n">TimelinessRelativeRule</span><span class="p">(</span>
<span class="o">...</span>     <span class="n">field</span><span class="o">=</span><span class="s2">&quot;sensor_timestamp&quot;</span><span class="p">,</span>
<span class="o">...</span>     <span class="n">start_timedelta</span><span class="o">=</span><span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=-</span><span class="mi">12</span><span class="p">),</span>
<span class="o">...</span>     <span class="n">end_timedelta</span><span class="o">=</span><span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
<span class="o">...</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">rule</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</code></pre></div>
</details>

    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>DataQualityResult</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Contains the timeliness score (<code>pass_rate</code>), indices and sample of failed records,</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>total records evaluated, and metadata. See DataQualityResult documentation for details.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="gchq_data_quality.rules.timeliness.TimelinessStaticRule" class="doc doc-heading">
            <code>gchq_data_quality.rules.timeliness.TimelinessStaticRule</code>


</h3>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="gchq_data_quality.rules.timeliness.TimelinessBaseRule">TimelinessBaseRule</span></code></p>



        <p>Rule to check whether datetime values in a column fall between absolute start and end date boundaries (inclusive).</p>
<p>Suitable where both boundaries are fixed or known in advance (e.g., events occurring in January 2024).
All dates are treated as, or coerced to, UTC, with date-only strings assumed to be midnight. Invalid or unparsable datetime
values are treated as missing. Combine with a validity rule and completeness rule on the same field for the best insights.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="field = Field(..., description='Column to check')

  
      class-attribute
      instance-attribute
   (gchq_data_quality.rules.timeliness.TimelinessStaticRule.field)" href="#gchq_data_quality.rules.base.BaseRule.field">field</a></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the datetime column to assess.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="gchq_data_quality.rules.timeliness.TimelinessStaticRule.start_date">start_date</span></code></td>
            <td>
                  <code><span title="str">str</span> | <span title="datetime.datetime">datetime</span> | <span title="pandas.Timestamp">Timestamp</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Inclusive lower boundary for valid values.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="gchq_data_quality.rules.timeliness.TimelinessStaticRule.end_date">end_date</span></code></td>
            <td>
                  <code><span title="str">str</span> | <span title="datetime.datetime">datetime</span> | <span title="pandas.Timestamp">Timestamp</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Inclusive upper boundary for valid values.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="gchq_data_quality.rules.timeliness.TimelinessStaticRule.dayfirst">dayfirst</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, parses ALL dates and rule inputs as day/month/year, otherwise month/day/year.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="na_values = Field(default=None, description='Additional values to treat as null')

  
      class-attribute
      instance-attribute
   (gchq_data_quality.rules.timeliness.TimelinessStaticRule.na_values)" href="#gchq_data_quality.rules.base.BaseRule.na_values">na_values</a></code></td>
            <td>
                  <code><span title="str">str</span> | <span title="list">list</span>[<span title="Any">Any</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Values treated as missing.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="data_quality_dimension = Field(..., description='The Dama dimension for each rule')

  
      class-attribute
      instance-attribute
   (gchq_data_quality.rules.timeliness.TimelinessStaticRule.data_quality_dimension)" href="#gchq_data_quality.rules.base.BaseRule.data_quality_dimension">data_quality_dimension</a></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="gchq_data_quality.models.DamaFramework" href="#gchq_data_quality.models.DamaFramework">DamaFramework</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Associated data quality dimension.
(You may want to override, e.g. perhaps 'Consistency' makes sense for some of these rules)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="rule_id = Field(default=None, description='Identifier for this rule')

  
      class-attribute
      instance-attribute
   (gchq_data_quality.rules.timeliness.TimelinessStaticRule.rule_id)" href="#gchq_data_quality.rules.base.BaseRule.rule_id">rule_id</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional rule identifier.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="rule_description = Field(default=None, description='Description of the rule')

  
      class-attribute
      instance-attribute
   (gchq_data_quality.rules.timeliness.TimelinessStaticRule.rule_description)" href="#gchq_data_quality.rules.base.BaseRule.rule_description">rule_description</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional rule description.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="evaluate(data_source, index_name='', query=None) (gchq_data_quality.rules.timeliness.TimelinessStaticRule.evaluate)" href="#gchq_data_quality.rules.base.BaseRule.evaluate">evaluate</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>pd.DataFrame | SparkDataFrame) -&gt; DataQualityResult
Evaluates the rule on the provided Pandas or Spark DataFrame and returns
the metrics and diagnostics of the rule evaluation.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">rule</span> <span class="o">=</span> <span class="n">TimelinessStaticRule</span><span class="p">(</span>
<span class="o">...</span>     <span class="n">field</span><span class="o">=</span><span class="s2">&quot;event_date&quot;</span><span class="p">,</span>
<span class="o">...</span>     <span class="n">start_date</span><span class="o">=</span><span class="s2">&quot;2024-01-01T00:00:00Z&quot;</span><span class="p">,</span>
<span class="o">...</span>     <span class="n">end_date</span><span class="o">=</span><span class="s2">&quot;2024-01-31T23:59:59Z&quot;</span>
<span class="o">...</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">rule</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

<span class="c1"># Only require that dates are on or after 2023-06-01</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">rule</span> <span class="o">=</span> <span class="n">TimelinessStaticRule</span><span class="p">(</span>
<span class="o">...</span>     <span class="n">field</span><span class="o">=</span><span class="s2">&quot;date_col&quot;</span><span class="p">,</span>
<span class="o">...</span>     <span class="n">start_date</span><span class="o">=</span><span class="s2">&quot;2023-06-01&quot;</span><span class="p">,</span>
<span class="o">...</span>     <span class="n">end_date</span><span class="o">=</span><span class="kc">None</span>
<span class="o">...</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">rule</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

<span class="c1"># Using string-based boundaries with day-first format</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">rule</span> <span class="o">=</span> <span class="n">TimelinessStaticRule</span><span class="p">(</span>
<span class="o">...</span>     <span class="n">field</span><span class="o">=</span><span class="s2">&quot;timestamp&quot;</span><span class="p">,</span>
<span class="o">...</span>     <span class="n">start_date</span><span class="o">=</span><span class="s2">&quot;01/06/2023&quot;</span><span class="p">,</span>
<span class="o">...</span>     <span class="n">end_date</span><span class="o">=</span><span class="s2">&quot;30/06/2023&quot;</span><span class="p">,</span>
<span class="o">...</span>     <span class="n">dayfirst</span><span class="o">=</span><span class="kc">True</span> <span class="c1"># also assumes dates in field &#39;timestamp&#39; are dayfirst</span>
<span class="o">...</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">rule</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

<span class="c1"># Using Python datetime objects as boundaries</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timezone</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">rule</span> <span class="o">=</span> <span class="n">TimelinessStaticRule</span><span class="p">(</span>
<span class="o">...</span>     <span class="n">field</span><span class="o">=</span><span class="s2">&quot;timestamp&quot;</span><span class="p">,</span>
<span class="o">...</span>     <span class="n">start_date</span><span class="o">=</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2023</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">),</span>
<span class="o">...</span>     <span class="n">end_date</span><span class="o">=</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2023</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">),</span>
<span class="o">...</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">rule</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</code></pre></div>
</details>

    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>DataQualityResult</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Contains the timeliness score (<code>pass_rate</code>), indices of failed records,</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a sample of those records, and metadata. See DataQualityResult documentation for details.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="gchq_data_quality.rules.validity.ValidityNumericalRangeRule" class="doc doc-heading">
            <code>gchq_data_quality.rules.validity.ValidityNumericalRangeRule</code>


</h3>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="gchq_data_quality.rules.base.BaseRule" href="#gchq_data_quality.rules.base.BaseRule">BaseRule</a></code></p>



        <p>Rule for validating numerical values against a specified range.</p>
<p>Considers only non-null values; values outside the range or failing coercion to
numeric are considered invalid. Diagnostic samples and record indices are
returned for values outside the allowed range.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="field = Field(..., description='Column to check')

  
      class-attribute
      instance-attribute
   (gchq_data_quality.rules.validity.ValidityNumericalRangeRule.field)" href="#gchq_data_quality.rules.base.BaseRule.field">field</a></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Column to check for numerical range validity.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="gchq_data_quality.rules.validity.ValidityNumericalRangeRule.min_value">min_value</span></code></td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Minimum allowed value (inclusive; defaults to -infinity).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="gchq_data_quality.rules.validity.ValidityNumericalRangeRule.max_value">max_value</span></code></td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Maximum allowed value (inclusive; defaults to +infinity).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="na_values = Field(default=None, description='Additional values to treat as null')

  
      class-attribute
      instance-attribute
   (gchq_data_quality.rules.validity.ValidityNumericalRangeRule.na_values)" href="#gchq_data_quality.rules.base.BaseRule.na_values">na_values</a></code></td>
            <td>
                  <code><span title="str">str</span> | <span title="list">list</span>[<span title="Any">Any</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional values to treat as missing.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="gchq_data_quality.rules.validity.ValidityNumericalRangeRule.data_quality_dimension">data_quality_dimension</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="gchq_data_quality.models.DamaFramework" href="#gchq_data_quality.models.DamaFramework">DamaFramework</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Data quality dimension (Validity).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="rule_id = Field(default=None, description='Identifier for this rule')

  
      class-attribute
      instance-attribute
   (gchq_data_quality.rules.validity.ValidityNumericalRangeRule.rule_id)" href="#gchq_data_quality.rules.base.BaseRule.rule_id">rule_id</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional rule identifier.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="rule_description = Field(default=None, description='Description of the rule')

  
      class-attribute
      instance-attribute
   (gchq_data_quality.rules.validity.ValidityNumericalRangeRule.rule_description)" href="#gchq_data_quality.rules.base.BaseRule.rule_description">rule_description</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional rule description.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="evaluate(data_source, index_name='', query=None) (gchq_data_quality.rules.validity.ValidityNumericalRangeRule.evaluate)" href="#gchq_data_quality.rules.base.BaseRule.evaluate">evaluate</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>pd.DataFrame | SparkDataFrame) -&gt; DataQualityResult
Evaluates the rule on the provided Pandas or Spark DataFrame and returns
the metrics and diagnostics of the rule evaluation.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">rule</span> <span class="o">=</span> <span class="n">ValidityNumericalRangeRule</span><span class="p">(</span>
<span class="o">...</span>     <span class="n">field</span><span class="o">=</span><span class="s2">&quot;age&quot;</span><span class="p">,</span>
<span class="o">...</span>     <span class="n">min_value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
<span class="o">...</span>     <span class="n">max_value</span><span class="o">=</span><span class="mi">120</span>
<span class="o">...</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">rule</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

<span class="c1"># no upper limit</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">rule</span> <span class="o">=</span> <span class="n">ValidityNumericalRangeRule</span><span class="p">(</span>
<span class="o">...</span>     <span class="n">field</span><span class="o">=</span><span class="s2">&quot;temp_c&quot;</span><span class="p">,</span>
<span class="o">...</span>     <span class="n">min_value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
<span class="o">...</span>     <span class="n">na_values</span><span class="o">=-</span><span class="mi">999</span>
<span class="o">...</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">rule</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

<span class="c1"># no lower limit</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">rule</span> <span class="o">=</span> <span class="n">ValidityNumericalRangeRule</span><span class="p">(</span>
<span class="o">...</span>     <span class="n">field</span><span class="o">=</span><span class="s2">&quot;score&quot;</span><span class="p">,</span>
<span class="o">...</span>     <span class="n">max_value</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
<span class="o">...</span>     <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;missing&#39;</span><span class="p">,</span> <span class="s1">&#39;N/A&#39;</span><span class="p">]</span>
<span class="o">...</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">rule</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</code></pre></div>
</details>

    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>DataQualityResult</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Contains the validity score (<code>pass_rate</code>),</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>sample and indices of failed records, total records evaluated,</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>and rule metadata. See DataQualityResult documentation for details.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="gchq_data_quality.rules.validity.ValidityRegexRule" class="doc doc-heading">
            <code>gchq_data_quality.rules.validity.ValidityRegexRule</code>


</h3>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="gchq_data_quality.rules.base.BaseRule" href="#gchq_data_quality.rules.base.BaseRule">BaseRule</a></code></p>



        <p>Rule for validating string values against a regular expression.</p>
<p>Considers only non-null entries, with additional missing-value patterns specified via
<code>na_values</code>. A diagnostic sample of values failing the regex is returned if present.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="field = Field(..., description='Column to check')

  
      class-attribute
      instance-attribute
   (gchq_data_quality.rules.validity.ValidityRegexRule.field)" href="#gchq_data_quality.rules.base.BaseRule.field">field</a></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Column to check for regex validity.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="gchq_data_quality.rules.validity.ValidityRegexRule.regex_pattern">regex_pattern</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Regular expression pattern for validation.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="na_values = Field(default=None, description='Additional values to treat as null')

  
      class-attribute
      instance-attribute
   (gchq_data_quality.rules.validity.ValidityRegexRule.na_values)" href="#gchq_data_quality.rules.base.BaseRule.na_values">na_values</a></code></td>
            <td>
                  <code><span title="str">str</span> | <span title="list">list</span>[<span title="Any">Any</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional values to treat as missing.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="gchq_data_quality.rules.validity.ValidityRegexRule.data_quality_dimension">data_quality_dimension</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="gchq_data_quality.models.DamaFramework" href="#gchq_data_quality.models.DamaFramework">DamaFramework</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Data quality dimension (Validity) by default.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="rule_id = Field(default=None, description='Identifier for this rule')

  
      class-attribute
      instance-attribute
   (gchq_data_quality.rules.validity.ValidityRegexRule.rule_id)" href="#gchq_data_quality.rules.base.BaseRule.rule_id">rule_id</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional rule identifier.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="rule_description = Field(default=None, description='Description of the rule')

  
      class-attribute
      instance-attribute
   (gchq_data_quality.rules.validity.ValidityRegexRule.rule_description)" href="#gchq_data_quality.rules.base.BaseRule.rule_description">rule_description</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional rule description.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="evaluate(data_source, index_name='', query=None) (gchq_data_quality.rules.validity.ValidityRegexRule.evaluate)" href="#gchq_data_quality.rules.base.BaseRule.evaluate">evaluate</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>pd.DataFrame | SparkDataFrame) -&gt; DataQualityResult
Evaluates the rule on the provided Pandas or Spark DataFrame and returns
the metrics and diagnostics of the rule evaluation.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">rule</span> <span class="o">=</span> <span class="n">ValidityRegexRule</span><span class="p">(</span>
<span class="o">...</span>     <span class="n">field</span><span class="o">=</span><span class="s2">&quot;email&quot;</span><span class="p">,</span>
<span class="o">...</span>     <span class="n">regex_pattern</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;^[^@]+@[^@]+\.[^@]+$&#39;</span>
<span class="o">...</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">rule</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">rule</span> <span class="o">=</span> <span class="n">ValidityRegexRule</span><span class="p">(</span>
<span class="o">...</span>     <span class="n">field</span><span class="o">=</span><span class="s2">&quot;country_code&quot;</span><span class="p">,</span>
<span class="o">...</span>     <span class="n">regex_pattern</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;^[A-Z]</span><span class="si">{2}</span><span class="s1">$&#39;</span>
<span class="o">...</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">rule</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</code></pre></div>
</details>

<details class="note" open>
  <summary>Note</summary>
  <p>To centrally manage and update regex patterns you can provide a separate YAML file containing named regex patterns
(e.g., EMAIL_REGEX, POSTCODE_REGEX). Keys in this file are substituted in your
main configuration files wherever referenced, enabling consistent and maintainable
regex use.</p>
<p>When storing regex patterns in YAML, always use single quotes ('pattern') rather than double quotes to ensure correct
handling of typical regex escape characters, such as \d or \w.</p>
<div class="codehilite"><pre><span></span><code># regex_patterns.yaml
EMAIL_REGEX: &#39;^[^@]+@[^@]+\.[^@]+$&#39;
POSTCODE_REGEX: &#39;^[A-Z]{2}[0-9]{2,3}\s?[0-9][A-Z]{2}$&#39;

# In your DQ config YAML, use the key in place of the regex pattern:
rules:
- function: validity_regex
    field: email
    regex_pattern: EMAIL_REGEX

# Python code to load with substitution:
&gt;&gt;&gt; from gchq_data_quality.config import DataQualityConfig
&gt;&gt;&gt; dq_config = DataQualityConfig.from_yaml(
...     &#39;your_config.yaml&#39;,
...     regex_yaml_path=&#39;regex_patterns.yaml&#39;
... )
</code></pre></div>
</details>

    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>DataQualityResult</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Contains the validity score (<code>pass_rate</code>),</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>sample and indices of failed records, number of evaluated records,</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>and rule metadata. See DataQualityResult documentation for details.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>











<div class="doc doc-children">












  </div>

    </div>

</div><h2 id="data-quality-configuration-and-results">Data Quality Configuration and Results</h2>


<div class="doc doc-object doc-class">



<h3 id="gchq_data_quality.config.DataQualityConfig" class="doc doc-heading">
            <code>gchq_data_quality.config.DataQualityConfig</code>


</h3>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>



        <p>Configuration describing a set of data quality checks to be run on a dataset.</p>
<p>Typically constructed by loading a YAML file specifying the dataset and a list
of rule definitions. Can also be created programmatically.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="gchq_data_quality.config.DataQualityConfig.dataset_name">dataset_name</span></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dataset name or identifier.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="gchq_data_quality.config.DataQualityConfig.measurement_sample">measurement_sample</span></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Description of data sample.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="gchq_data_quality.config.DataQualityConfig.lifecycle_stage">lifecycle_stage</span></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The lifecycle stage at which data is measured.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="gchq_data_quality.config.DataQualityConfig.measurement_time">measurement_time</span></code></td>
            <td>
                  <code><span title="datetime">datetime</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Measurement timestamp.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="gchq_data_quality.config.DataQualityConfig.dataset_id">dataset_id</span></code></td>
            <td>
                  <code><span title="str">str</span> | <span title="int">int</span> | <span title="float">float</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Local data catalogue ID.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="gchq_data_quality.config.DataQualityConfig.rules">rules</span></code></td>
            <td>
                  <code><span title="list">list</span>[<span title="gchq_data_quality.config.RuleType">RuleType</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of rule models.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <div class="highlight"><pre><span></span><code><span class="c1"># Loading from YAML</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">DataQualityConfig</span><span class="o">.</span><span class="n">from_yaml</span><span class="p">(</span><span class="s2">&quot;my_config.yaml&quot;</span><span class="p">)</span>
<span class="o">--</span> <span class="n">see</span> <span class="n">tutorial</span> <span class="k">for</span> <span class="n">how</span> <span class="n">to</span> <span class="n">specify</span> <span class="n">the</span> <span class="n">yaml</span> <span class="n">file</span><span class="p">,</span> <span class="ow">or</span> <span class="n">create</span> <span class="n">a</span> <span class="n">config</span> <span class="n">programatically</span> <span class="ow">and</span> <span class="n">use</span> <span class="o">.</span><span class="n">to_yaml</span><span class="p">()</span> <span class="n">to</span> <span class="n">create</span> <span class="n">something</span> <span class="n">to</span> <span class="n">start</span> <span class="k">with</span><span class="o">.</span>

<span class="c1"># Override regex patterns</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">DataQualityConfig</span><span class="o">.</span><span class="n">from_yaml</span><span class="p">(</span><span class="s2">&quot;my_config.yaml&quot;</span><span class="p">,</span> <span class="n">regex_yaml_path</span><span class="o">=</span><span class="s1">&#39;regex_patterns.yaml&#39;</span><span class="p">)</span>

<span class="c1"># Running data quality checks</span>
<span class="n">report</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">data_source</span><span class="o">=</span><span class="n">my_dataframe</span><span class="p">)</span>

<span class="c1"># Or, creating config programmatically from scratch</span>
<span class="n">config2</span> <span class="o">=</span> <span class="n">DataQualityConfig</span><span class="p">(</span>
    <span class="n">dataset_name</span><span class="o">=</span><span class="s2">&quot;my_data&quot;</span><span class="p">,</span>
    <span class="n">rules</span><span class="o">=</span><span class="p">[</span>
        <span class="n">ValidityRegexRule</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="s2">&quot;email&quot;</span><span class="p">,</span> <span class="n">regex_pattern</span><span class="o">=</span><span class="s1">&#39;.+@example.com&#39;</span><span class="p">),</span>
    <span class="p">],</span>
<span class="p">)</span>
</code></pre></div>
</details>        <p>Methods:</p>
<div class="codehilite"><pre><span></span><code>execute(data_source) -&gt; DataQualityReport:
    Execute the measurement configuration against the provided data source
    (e.g., pandas DataFrame, Spark DataFrame).
    Runs each rule&#39;s evaluate() method and returns a DataQualityReport
    containing the results.

from_yaml(file_path: str | Path, regex_yaml_path: str | Path | None = None) -&gt; DataQualityConfig:
    Load a configuration instance from a YAML file. If regex_yaml_path is provided,
    regex patterns in rule definitions can be overridden or supplemented by patterns
    from this separate YAML file.

to_yaml(file_path: str | Path, overwrite: bool = False) -&gt; None:
    Save as YAML file.

from_report(report: DataQualityReport) -&gt; DataQualityConfig:
    Create config instance from report results. This will extract the rule defintition from the
    rule_data field (which is a JSON dump of all rule metadata)
</code></pre></div>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="gchq_data_quality.results.models.DataQualityReport" class="doc doc-heading">
            <code>gchq_data_quality.results.models.DataQualityReport</code>


</h3>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="gchq_data_quality.models.DataQualityBaseModel">DataQualityBaseModel</span></code></p>



        <p>A collection of individual data quality results for a dataset.
This object is typically returned by executing a DataQualityConfig object, rather than
instantiated directly by the user.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="gchq_data_quality.results.models.DataQualityReport.results">results</span></code></td>
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="gchq_data_quality.results.models.DataQualityResult" href="#gchq_data_quality.results.models.DataQualityResult">DataQualityResult</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of individual DataQualityResults for each rule applied.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><span title="gchq_data_quality.results.models.DataQualityReport.to_dataframe">to_dataframe</span></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Converts report results to a pandas DataFrame for analysis.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span title="gchq_data_quality.results.models.DataQualityReport.to_json">to_json</span></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Serialises the report to JSON, optionally saving to file.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span title="gchq_data_quality.results.models.DataQualityReport.from_dataframe">from_dataframe</span></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Constructs a DataQualityReport from a pandas DataFrame formatted as in to_dataframe().</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <div class="highlight"><pre><span></span><code><span class="n">config</span> <span class="o">=</span> <span class="n">DataQualityConfig</span><span class="o">.</span><span class="n">from_yaml</span><span class="p">(</span><span class="s1">&#39;quality_cfg.yaml&#39;</span><span class="p">)</span>
<span class="n">report</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">df</span><span class="p">)</span> <span class="c1"># &lt;- this is the DataQualityReport object creation step</span>
<span class="n">df_results</span> <span class="o">=</span> <span class="n">report</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">(</span><span class="n">decimals</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">report</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="s1">&#39;results.json&#39;</span><span class="p">)</span>
</code></pre></div>
</details>










<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="gchq_data_quality.results.models.DataQualityResult" class="doc doc-heading">
            <code>gchq_data_quality.results.models.DataQualityResult</code>


</h3>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="gchq_data_quality.models.DataQualityBaseModel">DataQualityBaseModel</span></code></p>



        <p>Represents the outcome of a single data quality rule applied to a dataset column.
Noting that some rules may reference additional columns, such as ConsistencyRule</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="gchq_data_quality.results.models.DataQualityResult.dataset_name">dataset_name</span></code></td>
            <td>
                  <code><span title="float">float</span> | <span title="str">str</span> | <span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Common, human-readable name of the measured dataset.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="gchq_data_quality.results.models.DataQualityResult.dataset_id">dataset_id</span></code></td>
            <td>
                  <code><span title="float">float</span> | <span title="str">str</span> | <span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Machine-readable unique ID for the dataset.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="gchq_data_quality.results.models.DataQualityResult.measurement_sample">measurement_sample</span></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Description of the sample measured.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="gchq_data_quality.results.models.DataQualityResult.lifecycle_stage">lifecycle_stage</span></code></td>
            <td>
                  <code><span title="typing.Any">Any</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Stage of data lifecycle at the time of measurement (e.g., '01 ingest').</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="gchq_data_quality.results.models.DataQualityResult.measurement_time">measurement_time</span></code></td>
            <td>
                  <code><span title="gchq_data_quality.models.UTCDateTimeStrict">UTCDateTimeStrict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>UTC timestamp when measurement was taken. Defaults to 'now' in UTC.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="gchq_data_quality.results.models.DataQualityResult.field">field</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the column the rule applies to.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="gchq_data_quality.results.models.DataQualityResult.data_quality_dimension">data_quality_dimension</span></code></td>
            <td>
                  <code><span title="DamaFramework">DamaFramework</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Data quality dimension evaluated (Uniqueness, Completeness, etc.).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="gchq_data_quality.results.models.DataQualityResult.records_evaluated">records_evaluated</span></code></td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Total records evaluated by this rule.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="gchq_data_quality.results.models.DataQualityResult.pass_rate">pass_rate</span></code></td>
            <td>
                  <code><span title="float">float</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Ratio (0-1) of passing records to evaluated records.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="gchq_data_quality.results.models.DataQualityResult.rule_id">rule_id</span></code></td>
            <td>
                  <code><span title="typing.Any">Any</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Local identifier for the applied rule.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="gchq_data_quality.results.models.DataQualityResult.rule_description">rule_description</span></code></td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Text, dict, or JSON describing rule parameters and logic.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="gchq_data_quality.results.models.DataQualityResult.rule_data">rule_data</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>JSON dump of rule metadata for reconstruction of rule.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="gchq_data_quality.results.models.DataQualityResult.records_failed_ids">records_failed_ids</span></code></td>
            <td>
                  <code><span title="list">list</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Up to 10 (default) identifiers for rows failing the rule.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="gchq_data_quality.results.models.DataQualityResult.records_failed_sample">records_failed_sample</span></code></td>
            <td>
                  <code><span title="list">list</span>[<span title="dict">dict</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Sample output of failed records for diagnostics.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <div class="highlight"><pre><span></span><code><span class="c1"># Typical user interaction is via DataQualityReport:</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">DataQualityConfig</span><span class="o">.</span><span class="n">from_yaml</span><span class="p">(</span><span class="s1">&#39;config.yaml&#39;</span><span class="p">)</span>
<span class="n">report</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="n">first_result</span> <span class="o">=</span> <span class="n">report</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">first_result</span><span class="o">.</span><span class="n">pass_rate</span><span class="p">)</span>  <span class="c1"># Access result attributes</span>
</code></pre></div>
</details>

<details class="note" open>
  <summary>Note</summary>
  <p>Direct construction of DataQualityResult or DataQualityReport are rare; results are typically gathered in production using
RuleType.evaluate(df) or DataQualityConfig.execute(data)</p>
</details>










<div class="doc doc-children">












  </div>

    </div>

</div><h2 id="spark-utilities">Spark Utilities</h2>


<div class="doc doc-object doc-function">


<h3 id="gchq_data_quality.spark.dataframe_operations.flatten_spark" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">gchq_data_quality</span><span class="o">.</span><span class="n">spark</span><span class="o">.</span><span class="n">dataframe_operations</span><span class="o">.</span><span class="n">flatten_spark</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">flatten_cols</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents first">

        <p>Flattens arrays and nested fields in a Spark DataFrame to produce a Spark-safe,
single-level table.</p>
<p>The columns to flatten may include array or struct paths, with array selections:
    '[*]' - explodes arrays into multiple rows
    '[]' - selects the first non-null element from the array</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>df</code>
            </td>
            <td>
                  <code><span title="pyspark.sql.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The input Spark DataFrame containing nested or array fields.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>flatten_cols</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of strings indicating nested columns to flatten. Paths may
include array notation (e.g., 'orders[*].item', 'info.details[]').</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>DataFrame</code></td>            <td>
                  <code><span title="pyspark.sql.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A Spark DataFrame with the specified columns flattened and Spark-safe</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td></td>            <td>
                  <code><span title="pyspark.sql.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>column names.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the column paths are inconsistent or not found in the schema, or if array notation is misapplied.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <p>Flatten three levels of orders in a customer DataFrame:
<div class="highlight"><pre><span></span><code><span class="n">flat_df</span> <span class="o">=</span> <span class="n">flatten_spark</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="p">[</span>
    <span class="s2">&quot;customer[*].orders[*].items[*].productId&quot;</span><span class="p">,</span>
    <span class="s2">&quot;customer[*].name&quot;</span>
<span class="p">])</span>
<span class="n">flat_df</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></p>
</details>

    </div>

</div><h2 id="types-and-base-rule">Types and Base Rule</h2>
<p>The way we categorise the data quality dimensions</p>


<div class="doc doc-object doc-class">



<h3 id="gchq_data_quality.models.DamaFramework" class="doc doc-heading">
            <code>gchq_data_quality.models.DamaFramework</code>


</h3>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="str">str</span></code>, <code><span title="enum.Enum">Enum</span></code></p>



        <p>Allowed names for data quality framework dimensions following DAMA (Data Management Association).</p>


<details class="members" open>
  <summary>Members</summary>
  <p>Uniqueness: Value is "Uniqueness".
Completeness: Value is "Completeness".
Validity: Value is "Validity".
Consistency: Value is "Consistency".
Accuracy: Value is "Accuracy".
Timeliness: Value is "Timeliness".</p>
</details>

<details class="note" open>
  <summary>Note</summary>
  <p>It will accept any string case, but coerce to title case.</p>
</details>

<details class="example" open>
  <summary>Example</summary>
  <div class="highlight"><pre><span></span><code><span class="n">DamaFramework</span><span class="p">(</span><span class="s2">&quot;uniqueness&quot;</span><span class="p">)</span>   <span class="c1"># Returns DamaFramework.Uniqueness</span>
<span class="n">DamaFramework</span><span class="o">.</span><span class="n">Completeness</span><span class="o">.</span><span class="n">value</span>  <span class="c1"># &quot;Completeness&quot;</span>
</code></pre></div>
</details>










<div class="doc doc-children">












  </div>

    </div>

</div><p>The base rule is never called by a user, but serves as a parent for all data quality rules.
</p>


<div class="doc doc-object doc-class">



<h3 id="gchq_data_quality.rules.base.BaseRule" class="doc doc-heading">
            <code>gchq_data_quality.rules.base.BaseRule</code>


</h3>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="gchq_data_quality.models.DataQualityBaseModel">DataQualityBaseModel</span></code>, <code><span title="abc.ABC">ABC</span></code></p>



        <p>Abstract base class for data quality rule definitions.</p>
<p>Not intended for direct use. Use a Subclass with a specific rule type (e.g., AccuracyRule,
CompletenessRule) for configuration or execution of data quality checks. BaseRule
handles all generic configuration and evaluation steps, with rule-specific logic
implemented via subclass overrides.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="field = Field(..., description='Column to check')

  
      class-attribute
      instance-attribute
   (gchq_data_quality.rules.base.BaseRule.field)" href="#gchq_data_quality.rules.base.BaseRule.field">field</a></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Column to check for rule evaluation.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="rule_id = Field(default=None, description='Identifier for this rule')

  
      class-attribute
      instance-attribute
   (gchq_data_quality.rules.base.BaseRule.rule_id)" href="#gchq_data_quality.rules.base.BaseRule.rule_id">rule_id</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional identifier for this rule.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="rule_description = Field(default=None, description='Description of the rule')

  
      class-attribute
      instance-attribute
   (gchq_data_quality.rules.base.BaseRule.rule_description)" href="#gchq_data_quality.rules.base.BaseRule.rule_description">rule_description</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional summary or explanation of the rule.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="na_values = Field(default=None, description='Additional values to treat as null')

  
      class-attribute
      instance-attribute
   (gchq_data_quality.rules.base.BaseRule.na_values)" href="#gchq_data_quality.rules.base.BaseRule.na_values">na_values</a></code></td>
            <td>
                  <code><span title="str">str</span> | <span title="int">int</span> | <span title="float">float</span> | <span title="list">list</span>[<span title="typing.Any">Any</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Values to treat as NULL.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="skip_if_null = Field(default='any', description="Controls which rows are skipped that contain null values. If 'all' then it will only skip if all columns used are NULL.most rules this will just apply to the 'field' column, but some like TimelinessRelativeRule can use more than one column.If values aren't skipped, then NULL values are passed into the calculations so be cautious as to what you allow through as 3 > pd.NA = <NA> ")

  
      class-attribute
      instance-attribute
   (gchq_data_quality.rules.base.BaseRule.skip_if_null)" href="#gchq_data_quality.rules.base.BaseRule.skip_if_null">skip_if_null</a></code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;all&#39;, &#39;any&#39;, &#39;never&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Controls what records are skipped due to nulls.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="data_quality_dimension = Field(..., description='The Dama dimension for each rule')

  
      class-attribute
      instance-attribute
   (gchq_data_quality.rules.base.BaseRule.data_quality_dimension)" href="#gchq_data_quality.rules.base.BaseRule.data_quality_dimension">data_quality_dimension</a></code></td>
            <td>
                  <code><span title="DamaFramework">DamaFramework</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Linked DAMA data quality dimension.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="evaluate(data_source, index_name='', query=None) (gchq_data_quality.rules.base.BaseRule.evaluate)" href="#gchq_data_quality.rules.base.BaseRule.evaluate">evaluate</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>pd.DataFrame | SparkDataFrame | Elasticsearch) -&gt; DataQualityResult
Applies the rule to source data and returns evaluation metrics and diagnostics.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>


<details class="note" open>
  <summary>Note</summary>
  <p>This base class should not be instantiated directly. Use a rule subclass for
actual configuration or evaluation.</p>
</details>

    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>DataQualityResult</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Contains metrics of evaluation such as pass rate,</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>evaluated record count, indices/sample of failed records, and rule metadata.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>See DataQualityResult documentation for details.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>











<div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="gchq_data_quality.rules.base.BaseRule.data_quality_dimension" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">data_quality_dimension</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;The Dama dimension for each rule&#39;</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="gchq_data_quality.rules.base.BaseRule.field" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">field</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Column to check&#39;</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="gchq_data_quality.rules.base.BaseRule.na_values" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">na_values</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Additional values to treat as null&#39;</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="gchq_data_quality.rules.base.BaseRule.rule_description" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">rule_description</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Description of the rule&#39;</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="gchq_data_quality.rules.base.BaseRule.rule_id" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">rule_id</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Identifier for this rule&#39;</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="gchq_data_quality.rules.base.BaseRule.skip_if_null" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">skip_if_null</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s1">&#39;any&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Controls which rows are skipped that contain null values. If &#39;all&#39; then it will only skip if all columns used are NULL.most rules this will just apply to the &#39;field&#39; column, but some like TimelinessRelativeRule can use more than one column.If values aren&#39;t skipped, then NULL values are passed into the calculations so be cautious as to what you allow through as 3 &gt; pd.NA = &lt;NA&gt; &quot;</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

    </div>

</div>




<div class="doc doc-object doc-function">


<h4 id="gchq_data_quality.rules.base.BaseRule._coerce_dataframe_type" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_coerce_dataframe_type</span><span class="p">(</span><span class="n">df</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Some rules require values to be coerced to a different data type.
Timeliness &gt; UTC datetime,
ValiditiyNumericalRange &gt; numeric</p>
<p>This function handles coercing to the relevant data type
for the rule. Override if needed, the default behaviour is no coercion</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>pd.DataFrame: If no coercion, the original df. If coerced, a modifed dataframe</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="gchq_data_quality.rules.base.BaseRule._copy_and_subset_dataframe" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_copy_and_subset_dataframe</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">columns_used</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Copies the dataframe to avoid later mutations when we replace NA values
or coerce to a different data type.</p>
<p>Also ensures the dataframe columns are kept in the same order as the orginal df</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="gchq_data_quality.rules.base.BaseRule._evaluate_in_elastic" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_evaluate_in_elastic</span><span class="p">(</span><span class="n">es</span><span class="p">,</span> <span class="n">index_name</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="gchq_data_quality.rules.base.BaseRule._evaluate_in_pandas" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_evaluate_in_pandas</span><span class="p">(</span><span class="n">df</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Evaluates the rule against the provided DataFrame.</p>
<p>Performs field existence check, handles NA values and coercion calculates number of records evaluated and passing,
computes pass rate, and includes a sample of failed records if required.
A subset of the steps below can be overriden to give any inherited rule the desirved behaviour,
without having to completely override the evaluate() function itself.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>df</code>
            </td>
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The DataFrame to evaluate</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>DataQualityResult</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="gchq_data_quality.results.models.DataQualityResult" href="#gchq_data_quality.results.models.DataQualityResult">DataQualityResult</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A summary of data quality metrics for the rule such as</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="gchq_data_quality.results.models.DataQualityResult" href="#gchq_data_quality.results.models.DataQualityResult">DataQualityResult</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>records evaluated, pass rate, and details of failed records if required.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="gchq_data_quality.rules.base.BaseRule._evaluate_in_pandas_output_dataframe" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_evaluate_in_pandas_output_dataframe</span><span class="p">(</span><span class="n">df</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Wrapper to ensure when executing in Spark we return a DataFrame
(this is a Spark requirement), yet we want to maintain the behaviour that _evaluate_in_pandas
returns a DataQualityResult (so did not want to override that).</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A Dataframe in a format that matches SparkDataQualityResultSchema</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="gchq_data_quality.rules.base.BaseRule._evaluate_in_spark" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_evaluate_in_spark</span><span class="p">(</span><span class="n">spark_df</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>By default we execute everything in pandas via mapInPandas,
this partitions the data automatically and sends dataframes to each Spark worker,
we then aggregate the resulting data.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="gchq_data_quality.rules.base.BaseRule._get_columns_used_pandas" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_get_columns_used_pandas</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>The columns used in evaluting the rule, defaults to just the field, but other rules
such as consistency may use more than one column and will override this.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="gchq_data_quality.rules.base.BaseRule._get_null_count" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_get_null_count</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">field</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="gchq_data_quality.rules.base.BaseRule._get_null_counts_all_columns" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_get_null_counts_all_columns</span><span class="p">(</span><span class="n">df</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Goes through each column and calculates the null count.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary of {column_name : null_count} e.g. {'name' : 7, 'age' : 0}</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="gchq_data_quality.rules.base.BaseRule._get_records_evaluated_mask_pandas" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_get_records_evaluated_mask_pandas</span><span class="p">(</span><span class="n">df</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>The bool mask of whether a record is being evaluated.
The majority of rules will not evaluate against records that are NULL
With the exception of the CompletenessRule. So the default behaviour
is evaluate NON null values.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="gchq_data_quality.rules.base.BaseRule._get_records_evaluated_pandas" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_get_records_evaluated_pandas</span><span class="p">(</span><span class="n">df</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Computes the number of records that are evaluated against the rule.</p>
<p>By default, counts non-null entries in the target field. Override this
for rules involving multiple columns or different completeness logic.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>df</code>
            </td>
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The DataFrame to process.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>int</code></td>            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The count of records in the field being assessed.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="gchq_data_quality.rules.base.BaseRule._get_records_failed_mask_pandas" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_get_records_failed_mask_pandas</span><span class="p">(</span><span class="n">df</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Abstract method to generate a boolean mask for records failing the rule.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>df</code>
            </td>
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The DataFrame to process.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pandas.Series">Series</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>pd.Series: Boolean mask where True indicates a failing record.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="gchq_data_quality.rules.base.BaseRule._get_records_failed_pandas" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_get_records_failed_pandas</span><span class="p">(</span><span class="n">df</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Returns a list of unique records from the field that failed the rule.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>df</code>
            </td>
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The DataFrame instance to process
(assumes df has been filtered to just contain required columns).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>list</code></td>            <td>
                  <code><span title="list">list</span>[<span title="dict">dict</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Unique records from the field corresponding to failed records.
In format [{colA : valueA, colB : valueB}, {...etc}]</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="gchq_data_quality.rules.base.BaseRule._get_records_passing_mask_pandas" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_get_records_passing_mask_pandas</span><span class="p">(</span><span class="n">df</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>The bool mask of what records are passing (i.e. this function is the main way we define our data quality rules), this is also an AND with
the records_evaluated_mask by definition, as we cannot pass a record
if it has not been evaluated.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="gchq_data_quality.rules.base.BaseRule._get_records_passing_pandas" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_get_records_passing_pandas</span><span class="p">(</span><span class="n">df</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Abstract method to compute the number of records passing the data quality rule.</p>
<p>This must be customised for each specific rule.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>df</code>
            </td>
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The DataFrame to process.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>int</code></td>            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The count of records passing the rule's criteria.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="gchq_data_quality.rules.base.BaseRule._get_skip_if_null_mask" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_get_skip_if_null_mask</span><span class="p">(</span><span class="n">df</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Return mask for records to skip based on self.skip_if_null.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="gchq_data_quality.rules.base.BaseRule._get_spark_safe_rule" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_get_spark_safe_rule</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Returns a modified (deep copy) of the rule with spark safe column names
in any column used to evaluate the rule.
This is required when working with nested data, as if we want to measure 'customers.age'
after we flatten the dataframe and exract the age property from the 'customers' object
our column will be renamed to customers_age when it gets passed to _evaluate_in_pandas.</p>
<p>As 'customers.age' is not a valid Spark column name once the data is flattened.</p>
<p>This is overridden for each subrule type if more than self.field is used</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="gchq_data_quality.rules.base.BaseRule._handle_dataframe_coercion" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_handle_dataframe_coercion</span><span class="p">(</span><span class="n">df</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Coerce the dataframe to a new datatype (if required).
We will also check if the null count changes upon coercion and raise a warning with the user</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="gchq_data_quality.rules.base.BaseRule._handle_na_values_pandas" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_handle_na_values_pandas</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">columns_used</span><span class="p">,</span> <span class="n">na_values</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Replace specified values in a DataFrame with pd.NA if na_values is provided.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>df</code>
            </td>
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Input dataframe.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>columns_used</code>
            </td>
            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Columns to scan for null-like values.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>na_values</code>
            </td>
            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of values to consider as missing.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>pd.DataFrame: A dataframe where the specified values are replaced with pd.NA, or the original if na_values is None.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="gchq_data_quality.rules.base.BaseRule._replace_na_in_bool_mask" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_replace_na_in_bool_mask</span><span class="p">(</span><span class="n">mask</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>If we get 'None' in a boolean mask we can't conduct mask operations such as
inverting it or logical AND / OR, this replaces None / NA, with False.</p>
<p>This method can be overridden by child classes</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="gchq_data_quality.rules.base.BaseRule._require_failed_records_sample" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_require_failed_records_sample</span><span class="p">(</span><span class="n">pass_rate</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Determines whether a diagnostic sample of failed records should be collected.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>pass_rate</code>
            </td>
            <td>
                  <code><span title="float">float</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The rule pass rate, or None if no records were evaluated.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if failed record samples are required; otherwise, False.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="gchq_data_quality.rules.base.BaseRule._warn_if_null_counts_different" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_warn_if_null_counts_different</span><span class="p">(</span><span class="n">original_null_counts</span><span class="p">,</span> <span class="n">new_null_counts</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Compares the null counts between the original and new (the keys will be the same), if the new
has more nulls, raise a warning and mention the column. Typically something we do during coercion
to a new datatype.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="gchq_data_quality.rules.base.BaseRule.evaluate" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">evaluate</span><span class="p">(</span><span class="n">data_source</span><span class="p">,</span> <span class="n">index_name</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>
          <div class="doc-overloads">
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">evaluate</span><span class="p">(</span><span class="n">data_source</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataQualityResult</span>
</code></pre></div><div class="doc-signature highlight"><pre><span></span><code><span class="nf">evaluate</span><span class="p">(</span><span class="n">data_source</span><span class="p">:</span> <span class="n">SparkDataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataQualityResult</span>
</code></pre></div><div class="doc-signature highlight"><pre><span></span><code><span class="nf">evaluate</span><span class="p">(</span>
    <span class="n">data_source</span><span class="p">:</span> <span class="n">Elasticsearch</span><span class="p">,</span>
    <span class="n">index_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
    <span class="n">query</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataQualityResult</span>
</code></pre></div>          </div>


    <div class="doc doc-contents ">

        <p>Evaluates this rule against the provided data source.</p>
<p>Supports both Pandas and Spark DataFrames as input. Applies all
rule configuration, handles nulls and data coercion, and computes
relevant data quality metrics. If an Elasticsearch index and client
are supplied, an error is raised unless that backend is implemented.
Currently not implemented.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>data_source</code>
            </td>
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span> | <span title="pyspark.sql.DataFrame">DataFrame</span> | <span title="elasticsearch.Elasticsearch">Elasticsearch</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The data to evaluate
can be a Pandas DataFrame, a Spark DataFrame, or an Elasticsearch client.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>index_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Required if evaluating with Elasticsearch; the index to check.</p>
              </div>
            </td>
            <td>
                  <code>&#39;&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>query</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Required if evaluating with Elaticsearch, defaults to a query that matches all documents</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>DataQualityResult</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Contains the metrics and diagnostics of rule evaluation,</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>including pass rate, number of records evaluated, indices and sample of failed records,</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>and rule metadata. See DataQualityResult documentation for details.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an unsupported data source is provided.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="NotImplementedError">NotImplementedError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If Elasticsearch evaluation is requested but not supported.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["content.code.copy"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>